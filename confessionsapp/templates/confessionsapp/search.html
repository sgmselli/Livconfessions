{% extends 'base.html' %}

{%  block content %}
<div class="container">


    <div style="margin:85px auto">
        <div class="mb-3" style="text-align: center;">
            <input type="text"
                style="max-width: 40rem; width:100%; border-radius: 10px; border: none; background-color: rgb(250,250,250); box-shadow: 1.1px 1.1px rgb(210, 210, 210); padding:8px 10px"
                placeholder="Search Profiles" id="search" onkeyup="filterList()">
        </div>

        <ul id="profile" style="padding:0">
            {% for profile in profiles %}
            {% if forloop.counter < 30 %}
            <a href="/profile/{{profile.user}}" style="text-decoration: none">

                <div class="profileitem card-header "
                    style="max-width:40rem; margin:10px auto; border-radius: 7px; background-color: rgb(250,250,250); box-shadow: 1.1px 1.1px rgb(210, 210, 210);  ">
                    <div class="d-flex">
                        <div>
                            <img height="70" width="70" src="{{profile.profileimg.url}}" style="margin-right:25px; ">
                        </div>
                        <div style="margin-top:14px">
                            <h6 style="color: black;">@{{profile.user}}</h6>
                            <div class="card-subtitle" style="color: grey;">
                                {{profile.firstname}} {{profile.lastname}}
                            </div>
                        </div>
                    </div>
                </div>
            </a>
            {%endif%}



            {% endfor %}
        </ul>
    </div>
</div>

<script>
    inputBox = document.getElementById("search");

    function filterList() {

        
    profilelist = document.querySelectorAll('.profileitem')
    cardlist = document.querySelectorAll('.profileitem')
        
        const filter = inputBox.value.toLowerCase();
        console.log(filter.length)

        profilelist.forEach(profile => {

            let text = profile.outerText;
            if (text.toLowerCase().includes('@' + filter.toLowerCase())) {
                
                profile.style.display = '';
           
            }else {
                profile.style.display = 'none';
            }
        });
        
    }
</script>

{% endblock %}